---
import Bienvenida from '../components/Bienvenida.astro';
import PerfilUsuario from '../components/PerfilUsuario.astro';
---

<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Compra Familia</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js" defer></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js" defer></script>
    <script defer>
      // Inicialización clásica de Firebase (solo una vez en toda la app)
      window.addEventListener('DOMContentLoaded', function() {
        if (typeof firebase === 'undefined') {
          console.error('Firebase CDN no cargado');
          return;
        }
        const firebaseConfig = {
          apiKey: "AIzaSyATDEW5DXHEU5ezVOY6Fl_MxqFvYHhq5Uo",
          authDomain: "compra-familia.firebaseapp.com",
          projectId: "compra-familia",
          storageBucket: "compra-familia.firebasestorage.app",
          messagingSenderId: "380227123539",
          appId: "1:380227123539:web:e2e698d420e116a6c849a6"
        };
        if (!firebase.apps.length) {
          firebase.initializeApp(firebaseConfig);
        }
        window.auth = firebase.auth();
        window.db = firebase.firestore();
        console.log('Firebase inicializado:', window.auth, window.db);
      });
    </script>
    <style>
      body {
  background: var(--color-bg);
  color: var(--color-text);

  background: var(--color-bg);
  color: var(--color-text);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #f6f8fa;
        font-family: 'Inter', Arial, sans-serif;
        margin: 0;
      }
      .container {
        background: #fff;
        border-radius: 1.2rem;
        box-shadow: 0 2px 24px rgba(0,0,0,0.10);
        padding: 2.5rem 2rem;
        min-width: 320px;
        max-width: 95vw;
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1.2rem;
      }
      h1 {
        font-size: 2.2rem;
        margin-bottom: 1rem;
        color: #222;
        letter-spacing: 0.03em;
      }
      p {
  color: var(--color-text);

  color: var(--color-text);
        margin: 0.5rem 0 0 0;
        font-size: 1.1rem;
        color: #555;
        text-align: center;
      }
      a {
  color: var(--color-link);
  text-decoration: none;
  font-weight: 600;
  transition: color 0.2s;

  color: var(--color-link);
        color: #7b61ff;
        text-decoration: none;
        font-weight: 600;
        transition: color 0.2s;
      }
      a:hover {
  color: var(--color-link-hover);
  text-decoration: underline;

  color: var(--color-link-hover);
        color: #4e9fff;
        text-decoration: underline;
      }
      @media (max-width: 480px) {
        .container {
          min-width: unset;
          padding: 1.2rem 0.5rem;
        }
        h1 {
          font-size: 1.4rem;
        }
      }
    </style>
  
	
	<body>
    <Bienvenida />


    <div id="perfil-usuario-modal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:#0008;z-index:1000;justify-content:center;align-items:center;">
      <div style="position:relative;max-width:420px;width:95vw;background:#fff;border-radius:18px;box-shadow:0 2px 24px #0002;">
        <button id="cerrar-perfil-modal" aria-label="Cerrar" style="position:absolute;top:18px;right:20px;width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;font-size:2.2rem;color:#7b61ff;cursor:pointer;transition:background 0.2s, color 0.2s;border-radius:50%;outline:none;z-index:10;">
          <span style="font-size:2.1rem;line-height:1;">×</span>
        </button>
        <PerfilUsuario />
      </div>
    </div>
    <style>
      #cerrar-perfil-modal:hover {
        background: #ece6ff;
        color: #4e9fff;
      }
      #cerrar-perfil-modal:focus {
        outline: 2px solid #7b61ff;
      }
    </style>
    <script is:inline>
      window.addEventListener('abrir-perfil', () => {
        document.getElementById('perfil-usuario-modal').style.display = 'flex';
      });
      document.getElementById('cerrar-perfil-modal').onclick = () => {
        document.getElementById('perfil-usuario-modal').style.display = 'none';
      };
    </script>
  </body>
</html>
